[supervisord]
nodaemon=true
pidfile=/fluentd/supervisord.pid
logfile=/dev/null
logfile_maxbytes=0
loglevel=info
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0
stderr_logfile=/dev/stderr
stderr_logfile_maxbytes=0

[program:fluentd]
command=/usr/local/bundle/bin/fluentd -c /fluentd/etc/fluentd.conf
environment=PATH="/opt/venv/bin:%(ENV_PATH)s"
user=fluent
autostart=true
autorestart=true
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0
stderr_logfile=/dev/stderr
stderr_logfile_maxbytes=0

[program:downloader]
command=python3 /fluentd/etc/downloader.py
environment=PATH="/opt/venv/bin:%(ENV_PATH)s"
user=fluent
autostart=true
autorestart=unexpected
startsecs=0
startretries=1
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0
stderr_logfile=/dev/stderr
stderr_logfile_maxbytes=0
